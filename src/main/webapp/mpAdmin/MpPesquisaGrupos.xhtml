<ui:composition template="/WEB-INF/template/MpLayoutPadrao.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:b="http://bootsfaces.net/ui"
    xmlns:p="http://primefaces.org/ui">

	<ui:define name="corpo">

		<ui:include src="/WEB-INF/template/MpBotoesPadrao.xhtml" />

		<h:form id="frmGrupo">

			<b:messages styleClass="msgs" redisplay="true" recursive="true" />
			<p:messages showDetail="false" autoUpdate="true" closable="true" />
			
			<b:growl placementFrom="top" delay="3000" escape="true" />

			<b:jumbotron fluid="true">
				<b:row>
					<b:column col-md="3" />
					<b:column col-md="6">
						<h3>Consulta Grupo Usuários</h3>
					</b:column>
					<b:column col-md="3">
						<p:commandButton value="Exportar para XLS" ajax="false"	icon="fa fa-file-excel-o Fs14 red">
							<p:dataExporter type="xls" target="mpGruposTable"	fileName="grupos"
								postProcessor="#{mpFilterViewGrupo.posProcessarXls}" />
						</p:commandButton>
					</b:column>
				</b:row>

				<b:row>
					<b:column col-md="12">

						<p:dataTable id="mpGruposTable" sortMode="multiple"
							var="mpGrupoX" value="#{mpFilterViewGrupo.mpGrupoList}"
							rowKey="#{mpGrupo.parametro}" reflow="true" style="margin-top:20px"
							emptyMessage="Nenhum registro encontrado." rows="5"
							paginator="true" paginatorAlwaysVisible="false"
							paginatorPosition="top">

							<f:facet name="header">
								<p:outputPanel style="float:right">
									<p:commandButton update=":frmGrupo:scDialogId" oncomplete="PF('scDialog').show()"
										action="#{mpFilterViewGrupo.novoMpGrupo}" ajax="true"
										value="Novo" icon="fa fa-fw fa-edit" title="Novo Registro">
									</p:commandButton>
								</p:outputPanel>
							</f:facet>

							<p:column headerText="Nome" sortBy="#{mpGrupoX.nome}"
								filterBy="#{mpGrupoX.nome}" footerText="Contém" filterMatchMode="contains">
								<h:outputText value="#{mpGrupoX.nome}" />
							</p:column>
							<p:column headerText="Descrição" sortBy="#{mpGrupoX.descricao}"
								filterBy="#{mpGrupoX.descricao}" footerText="Contém" filterMatchMode="contains">
								<h:outputText value="#{mpGrupoX.descricao}" />
							</p:column>
							<p:column headerText="Ação" style="text-align:center">
								<p:commandButton update=":frmGrupo:scDialogId"
									oncomplete="PF('scDialog').show()"
									action="#{mpFilterViewGrupo.alteraMpGrupo}" ajax="true"
									value="Edita" icon="fa fa-fw fa-edit" title="Edita Registro">
									<f:setPropertyActionListener value="#{mpGrupoX}"
										target="#{mpFilterViewGrupo.mpGrupoSel}" />
								</p:commandButton>
								<p:commandButton update=":frmGrupo:scDialogId"
									oncomplete="PF('scDialog').show()"
									action="#{mpFilterViewGrupo.apagaMpGrupo}" ajax="true"
									value="Exclui" icon="fa fa-fw fa-remove"
									title="Exclui Registro">
									<f:setPropertyActionListener value="#{mpGrupoX}"
										target="#{mpFilterViewGrupo.mpGrupoSel}" />
								</p:commandButton>
							</p:column>
						</p:dataTable>

						<p:dialog id="scDialogId"
							header="Grupo #{mpFilterViewGrupo.txtModoTela}"
							widgetVar="scDialog" modal="true" showEffect="fade"
							hideEffect="fade" resizable="false">

							<p:outputPanel id="scDetailId" style="text-align:center;">
								<p:panelGrid columns="2" layout="grid"
									rendered="#{not empty mpFilterViewGrupo.mpGrupoSel}"
									style="border:0px none;background:none" styleClass="ui-fluid">

									<p:outputLabel value="Nome:" />
									<p:inputText readonly="#{mpFilterViewGrupo.indEditavel}"
										value="#{mpFilterViewGrupo.mpGrupoSel.nome}" />
									<p:outputLabel value="Descrição:" />
									<p:inputText readonly="#{mpFilterViewGrupo.indEditavel}"
										value="#{mpFilterViewGrupo.mpGrupoSel.descricao}" />
								</p:panelGrid>
							</p:outputPanel>

							<div>
								<b:commandButton style="padding: 0 4px;" iconAwesome="save"
									look="link" ajax="true"
									onclick="ajax:mpFilterViewGrupo.mpGrava()"
									oncomplete="PF('scDialog').hide();" update="frmGrupo" />
								<b:button value="Cancela" onclick="PF('scDialog').hide();" />
							</div>

						</p:dialog>
					</b:column>
				</b:row>
			</b:jumbotron>

		</h:form>

	</ui:define>

</ui:composition>